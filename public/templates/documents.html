<div class="container">

  <div class="row">
    <h1 class="page__title">Documents</h1>
    <button modal template="new-document" controller="DocumentModalController" action="docCtrl.update()" size="sm" class="btn btn-success pull-right page__btn">New Document</button>

    <table class="full-table">

      <thead>

        <tr class="table__header">

          <th class="table__first-row">Title</th>
          <th>Published</th>
          <th>Updated</th>
          <th>Chapters</th>
          <th></th>
          <th class="table__padding--right">

            <div class="sort-container pull-right" uib-dropdown>

              <span class="sort-btn" uib-dropdown-toggle>
                {{docCtrl.sortDisplay}} <span class="caret"></span>
              </span>

              <ul uib-dropdown-menu role="menu">
                <li role="menuitem">
                  <a href="#" ng-click="docCtrl.setSort('title', 'Title')">Title</a>
                </li>
                <li role="menuitem">
                  <a href="#" ng-click="docCtrl.setSort('status', 'Status')">Status</a>
                </li>
                <li role="menuitem">
                  <a href="#" ng-click="docCtrl.setSort('-updated', 'Updated')">Updated</a>
                </li>
              </ul>

            </div>

          </th>

        </tr>

      </thead>

      <tbody class="table__body">

        <tr class="table__row" ng-repeat="doc in docCtrl.docs | orderBy: docCtrl.sort">
          <td class="table__first-row">
            <a ui-sref="chapters({docid: '{{doc._id}}'})">{{doc.title}}</a>
          </td>
          <td>
            <toggle toggle-model="doc.published" change="docCtrl.publish(doc)"></toggle>
          </td>
          <td>{{doc.updated | date:'dd-MM-yyyy'}}</td>
          <td>{{doc.chapters.length}}</td>
          <td>bell</td>
          <td class="table__padding--right table__last-row" >
            <div class="table-dropdown" uib-dropdown>
              <span uib-dropdown-toggle>dots</span>

              <ul uib-dropdown-menu role="menu">
                <li role="menuitem">
                  <a href="#" modal template="new-document" size="sm" id="{{doc._id}}" edit="true" controller="DocumentModalController" action="docCtrl.update()">Edit document</a>
                </li>
                <li role="menuitem">
                  <a href="#" modal template="delete-document" controller="DocumentModalController" size="sm" id="{{doc._id}}" action="docCtrl.update()">Delete document</a>
                </li>
              </ul>

            </div>

          </td>

        </tr>

      </tbody>

    </table>

  </div>

</div>
