(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(global){"use strict";var Lexer=require("./lexer.js");var Parser=require("./parser.js");var Renderer=require("./renderer.js");function DocdParser(opts){this.name="pete";this.lexer=new Lexer;this.parser=new Parser;this.renderer=new Renderer}DocdParser.prototype={constructor:DocdParser,render:function(src){var html;var tokens=this.lexer.tokenize(src);var ast=this.parser.parse(tokens);html=this.renderer.render(ast);return html}};module.exports=DocdParser;global.DocdParser=DocdParser}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./lexer.js":3,"./parser.js":5,"./renderer.js":6}],2:[function(require,module,exports){var block={heading:/^ {0,3}(#{1,6}) +(.+)(?:\n+|$)/,newline:/^\n+/,codeBlock:/^(\t| {4}[^\n]+\n*)+/,codeFence:/^ *(`{3,}) *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^((?:[^\n]+\n?(?! *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\2 *(?:\n+|$)|( *)((?:[*+-]|\d+\.)) [\s\S]+?(?:\n+(?=\3?(?:[-*_] *){3,}(?:\n+|$))|\n+(?= *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))|\n{2,}(?! )(?!\1(?:[*+-]|\d+\.) )\n*|\s*$)|( *[-*_]){3,} *(?:\n+|$)| {0,3}(#{1,6}) +(.+)|([^\n]+)\n *(=|-){2,} *(?:\n+|$)|( *>[^\n]+(\n(?! *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))[^\n]+)*\n*)+|<(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\b)\w+(?!:\/|[^\w\s@]*@)\b| *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)))+)\n*/,horizontalRule:/^ *(([-*_])(?: *\2){2,}) *(?:\n+|$)/,tables:/^ *\|(.+)\n *\|(?:[-|]*)\n((?: *\|.*(?:\n|$))*)/,blockquote:/^( *>[^\n]+(?:\n[^\n]+)*\n*)+/};var inline={strong:{start:/^(\*\*|__)([\s\S]+)/,end:/(.+)(\*\*+|__+)/},emphasis:{start:/^(\*|_)([\s\S]+)/,end:/(.*?)(_+?)|(.*?)(\*+?)/},link:/^!?\[((?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*)\]\(\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*\)/,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/,whitespace:/^\s+/,codeSpan:/^(`+)\s*(.*?[^`])\s*\1/};module.exports={block:block,inline:inline}},{}],3:[function(require,module,exports){"use strict";var blockRules=require("./expressions.js").block;function Lexer(options){this.options=options||{};this.tokens=[];this.rules=blockRules}Lexer.prototype={constructor:Lexer,tokenize:function(src){this.tokens=[];var token;var match;var i;while(src){if((match=this.rules.newline.exec(src))!==null){src=src.substring(match[0].length);continue}if((match=this.rules.codeBlock.exec(src))!==null){src=src.substring(match[0].length);match=match[0].replace(/^ {4}/gm,"");token={type:"code block",value:match};this.tokens.push(token);continue}if((match=this.rules.codeFence.exec(src))!==null){src=src.substring(match[0].length);token={type:"code fence",value:match[2]};this.tokens.push(token);continue}if((match=this.rules.horizontalRule.exec(src))!==null){src=src.substring(match[0].length);token={type:"horizontal rule"};this.tokens.push(token);continue}if((match=this.rules.heading.exec(src))!==null){src=src.substring(match[0].length);token={type:"header",value:match[2],depth:match[1].length};this.tokens.push(token);continue}if((match=this.rules.tables.exec(src))!==null){src=src.substring(match[0].length);token={type:"table",headers:match[1].replace(/^ *|\| *$/g,"").split(/ *\| */),body:match[2].replace(/\n$/,"").split("\n")};for(i=0;i<token.body.length;i++){token.body[i]=token.body[i].replace(/^ *\| */g,"").replace(/ *\| *$/g,"").split(/ *\| */)}this.tokens.push(token);continue}if((match=this.rules.blockquote.exec(src))!==null){src=src.substring(match[0].length);match=match[0].replace(/^ *> ?/gm,"");token={type:"blockquote",value:match};this.tokens.push(token);continue}if((match=this.rules.paragraph.exec(src))!==null){src=src.substring(match[0].length);token={type:"paragraph",value:match[0]};this.tokens.push(token);continue}}return this.tokens}};module.exports=Lexer},{"./expressions.js":2}],4:[function(require,module,exports){"use strict";function Node(type,value,parent){this.type=type;this.value=value;this.parent=parent||null;this.children=[]}Node.prototype={constructor:Node,hasChildren:function(){return this.children.length>0},addChild:function(node){node.parent=this;this.children.push(node);return this}};module.exports=Node},{}],5:[function(require,module,exports){"use strict";var inlineRules=require("./expressions.js").inline;var Node=require("./node.js");var Tree=require("./tree.js");function Parser(options){this.options=options||{};this.rules=inlineRules;this.tokens=null;this.token=null;this.tokenIndex=0;this.ast=new Tree("document")}Parser.prototype={constructor:Parser,nextToken:function(){this.token=this.tokens[this.tokenIndex++];return this.token},peek:function(){return this.tokens[this.tokenIndex]},parse:function(tokens){var node;this.tokens=tokens;this.ast=new Tree("document");while(this.token=this.nextToken()){node=this._parseToken(this.token);if(node){this.ast.add(node)}}this.tokenIndex=0;return this.ast},_parseToken:function(token){var node=null;switch(token.type){case"header":node=this._parseHeader(token);break;case"paragraph":node=this._parseParagraph(token);break;case"table":node=this._parseTable(token);break;case"code block":node=this._parseCode(token);break;case"horizontal rule":node=this._parseHorizontalRule();break;case"code fence":node=this._parseCodeFence(token);break;case"blockquote":node=this._parseBlockquote(token);break;default:console.log("we will parse that node type soon")}return node},_parseHorizontalRule:function(){return new Node("horizontal rule",null)},_parseHeader:function(token){var node=new Node("header",null);node.depth=token.depth;node=this._inlineParse(token.value,node);return node},_parseCode:function(token){var node=new Node("codeBlock",token.value);return node},_parseCodeFence:function(token){return this._parseCode(token)},_parseParagraph:function(token){var node=new Node("paragraph");node=this._inlineParse(token.value,node);return node},_parseBlockquote:function(token){var node=new Node("blockquote");node.addChild(this._parseParagraph(token));return node},_parseTable:function(token){var i;var j;var tableNode=new Node("table");var tableHeaderNode=new Node("thead");var tableBodyNode=new Node("tbody");var tableRowNode;var rowData;for(i=0;i<token.headers.length;i++){if(!token.headers[i]){tableHeaderNode.addChild(new Node("th").addChild(new Node("text","")))}else{tableHeaderNode.addChild(this._inlineParse(token.headers[i],new Node("th")))}}for(i=0;i<token.body.length;i++){rowData=token.body[i];tableRowNode=new Node("tr");for(j=0;j<rowData.length;j++){if(!rowData[j]){tableRowNode.addChild(new Node("td").addChild(new Node("text","")))}else{tableRowNode.addChild(this._inlineParse(rowData[j],new Node("td")))}}tableBodyNode.addChild(tableRowNode)}tableNode.addChild(tableHeaderNode);tableNode.addChild(tableBodyNode);return tableNode},_inlineParse:function(src,parentNode){var node;var match;var delimiter;while(src){if((match=this.rules.strong.start.exec(src))!==null){delimiter=match[1];match=this.rules.strong.end.exec(src);if(match&&delimiter===match[2]){src=src.substring(match[0].length);node=new Node("strong",null);this._inlineParse(match[1].substring(delimiter.length),node);parentNode.addChild(node);continue}}if((match=this.rules.emphasis.start.exec(src))!==null){delimiter=match[1];match=this.rules.emphasis.end.exec(src.substring(1));if(match&&delimiter===match[2]){src=src.substring(match[0].length+1);node=new Node("em",null);this._inlineParse(match[1],node);parentNode.addChild(node);continue}}if((match=this.rules.link.exec(src))!==null){src=src.substring(match[0].length);node=new Node("link",null);node.href=match[2]||"#";node.title=match[3]||match[2];if(!match[1]){node.addChild(new Node("text",""))}else{this._inlineParse(match[1],node)}parentNode.addChild(node);continue}if((match=this.rules.codeSpan.exec(src))!==null){src=src.substring(match[0].length);node=new Node("codeSpan",match[2]);parentNode.addChild(node);continue}if((match=this.rules.text.exec(src))!==null){src=src.substring(match[0].length);node=new Node("text",match[0]);parentNode.addChild(node);continue}}return parentNode}};module.exports=Parser},{"./expressions.js":2,"./node.js":4,"./tree.js":7}],6:[function(require,module,exports){"use strict";function Renderer(opts){this.options=opts||{}}Renderer.prototype={constructor:Renderer,render:function(ast){return this._renderNodes(ast.root)},_renderNodes:function(rootNode){var self=this;var output="";if(rootNode.hasChildren()){rootNode.children.forEach(function(childNode){output+=self._renderNode(childNode)})}else{output+=self._renderNode(rootNode)}return output},_renderNode:function(node){var output="";switch(node.type){case"text":output+=this._renderText(node);break;case"th":output+=this._renderTableCell(node);break;case"tr":output+=this._renderTableCell(node);break;case"td":output+=this._renderTableCell(node);break;case"table":output+=this._renderTable(node);break;case"strong":output+=this._renderStrong(node);break;case"link":output+=this._renderLink(node);break;case"paragraph":output+=this._renderParagraph(node);break;case"blockquote":output+=this._renderBlockquote(node);break;case"header":output+=this._renderHeader(node);break;case"codeBlock":output+=this._renderCodeBlock(node);break;case"em":output+=this._renderEmphasis(node);break;case"codeSpan":output+=this._renderCodeSpan(node);break;default:output=""}return output},_renderText:function(node){return node.value||""},_renderTable:function(node){var table="<table>\n";table+=this._renderTableCell(node.children[0]);table+=this._renderTableCell(node.children[1]);table+="</table>\n";return table},_renderTableCell:function(node){return"<"+node.type+">"+this._renderNodes(node)+"</"+node.type+">\n"},_renderHorizontalRule:function(){return"<hr />\n"},_renderParagraph:function(node){return"<p>"+this._renderNodes(node)+"</p>\n"},_renderStrong:function(node){return"<strong>"+this._renderNodes(node)+"</strong>"},_renderLink:function(node){return'<a href="'+node.href+'" title="'+node.title+'">'+this._renderNodes(node)+"</a>"},_renderBlockquote:function(node){return"<blockquote>\n"+this._renderNodes(node)+"</blockquote>\n"},_renderHeader:function(node){var headerType="h"+node.depth;return"<"+headerType+">"+this._renderNodes(node)+"</"+headerType+">\n"},_renderCodeBlock:function(node){return"<pre><code>"+node.value+"</code></pre>\n"},_renderEmphasis:function(node){return"<em>"+this._renderNodes(node)+"</em>"},_renderCodeSpan:function(node){return"<code>"+node.value+"</code>"}};module.exports=Renderer},{}],7:[function(require,module,exports){"use strict";var Node=require("./node");function Tree(rootType){this.root=new Node(rootType)}Tree.prototype={constructor:Tree,traverse:function(cb){(function _traverse(currentNode){cb(currentNode);if(currentNode.hasChildren()){for(var i=0;i<currentNode.children.length;i++){_traverse(currentNode.children[i])}}})(this.root)},add:function(node,parentNode){var parent=parentNode||this.root;parent.addChild(node)}};module.exports=Tree},{"./node":4}]},{},[1]);
